# Valine API Key å®‰å…¨é…ç½®è¯´æ˜Ž

> **åˆ›å»ºæ—¥æœŸ**: 2026-02-28  
> **é‡è¦æ€§**: ðŸ”´ é«˜

---

## ðŸ“‹ é—®é¢˜è¯´æ˜Ž

åŽŸ `_config.yml` æ–‡ä»¶ä¸­æ˜Žæ–‡å­˜å‚¨äº† LeanCloud çš„ `app_id` å’Œ `app_key`ï¼Œè¿™å¯èƒ½å¯¼è‡´ï¼š
- API é…é¢è¢«æ»¥ç”¨
- è¯„è®ºæ•°æ®è¢«ç¯¡æ”¹
- äº§ç”Ÿé¢å¤–è´¹ç”¨

---

## âœ… å·²å®Œæˆçš„ä¿æŠ¤æŽªæ–½

### 1. é…ç½®åˆ†ç¦»

- âœ… åˆ›å»º `_config.local.yml` - å­˜å‚¨æ•æ„Ÿé…ç½®ï¼ˆå·²åŠ å…¥ `.gitignore`ï¼‰
- âœ… åˆ›å»º `_config.local.yml.example` - é…ç½®æ¨¡æ¿
- âœ… ä¿®æ”¹ `_config.yml` - ç§»é™¤æ•æ„Ÿä¿¡æ¯ï¼Œæ·»åŠ è¯´æ˜Žæ³¨é‡Š
- âœ… å¤‡ä»½åŽŸé…ç½® - `_config.yml.backup`

### 2. Git ä¿æŠ¤

- âœ… æ›´æ–° `.gitignore`ï¼Œæ·»åŠ ï¼š
  ```
  .env
  .env.local
  _config.local.yml
  _config.*.local.yml
  ```

---

## ðŸ”’ é¢å¤–å®‰å…¨å»ºè®®ï¼ˆé‡è¦ï¼ï¼‰

### åœ¨ LeanCloud åŽå°è®¾ç½®åŸŸåç™½åå•

**è¿™æ˜¯æœ€å…³é”®çš„å®‰å…¨æŽªæ–½ï¼**

1. è®¿é—® LeanCloud æŽ§åˆ¶å°ï¼šhttps://console.leancloud.app/
2. è¿›å…¥ä½ çš„åº”ç”¨ â†’ è®¾ç½® â†’ åº”ç”¨å®‰å…¨
3. è®¾ç½® **Web å®‰å…¨åŸŸå**ï¼š
   ```
   www.rocwong.cn
   rocwong-cn.github.io
   ```
4. å¯ç”¨ **HTTP Referer æ ¡éªŒ**

è¿™æ ·å³ä½¿ API Key æ³„éœ²ï¼Œä¹Ÿåªèƒ½åœ¨æŒ‡å®šåŸŸåä¸‹ä½¿ç”¨ã€‚

### ç›‘æŽ§ API ä½¿ç”¨

- å®šæœŸæ£€æŸ¥ LeanCloud åŽå°çš„ API è°ƒç”¨ç»Ÿè®¡
- è®¾ç½®ç”¨é‡å‘Šè­¦
- å¦‚å‘çŽ°å¼‚å¸¸ï¼Œç«‹å³é‡ç½® app_key

### å®šæœŸè½®æ¢å¯†é’¥

- å»ºè®®æ¯ 6-12 ä¸ªæœˆæ›´æ¢ä¸€æ¬¡ app_key
- æ›´æ¢æ­¥éª¤ï¼š
  1. åœ¨ LeanCloud åŽå°ç”Ÿæˆæ–°å¯†é’¥
  2. æ›´æ–° `_config.local.yml`
  3. é‡æ–°éƒ¨ç½²åšå®¢

---

## ðŸ“ æ–‡ä»¶è¯´æ˜Ž

| æ–‡ä»¶ | ç”¨é€” | æ˜¯å¦æäº¤ |
|------|------|---------|
| `_config.yml` | ä¸»é…ç½®æ–‡ä»¶ | âœ… æ˜¯ |
| `_config.local.yml` | æœ¬åœ°æ•æ„Ÿé…ç½® | âŒ å¦ |
| `_config.local.yml.example` | é…ç½®æ¨¡æ¿ | âœ… æ˜¯ |
| `_config.yml.backup` | åŽŸé…ç½®å¤‡ä»½ | âŒ å¦ï¼ˆæœ¬åœ°ï¼‰ |
| `.env` | çŽ¯å¢ƒå˜é‡æ–‡ä»¶ | âŒ å¦ |

---

## ðŸš€ éƒ¨ç½²è¯´æ˜Ž

### æœ¬åœ°éƒ¨ç½²

```bash
# ç¡®ä¿ _config.local.yml å­˜åœ¨
hexo clean
hexo generate
hexo deploy
```

### CI/CD éƒ¨ç½²ï¼ˆGitHub Actionsï¼‰

å¦‚æžœä½¿ç”¨ GitHub Actions è‡ªåŠ¨éƒ¨ç½²ï¼Œéœ€è¦ï¼š

1. åœ¨ GitHub Secrets ä¸­æ·»åŠ ï¼š
   - `VALINE_APP_ID`
   - `VALINE_APP_KEY`

2. åœ¨å·¥ä½œæµä¸­ç”Ÿæˆ `_config.local.yml`ï¼š
   ```yaml
   - name: Create local config
     run: |
       cat > source/_config.local.yml << EOF
       valine:
         enable: true
         app_id: ${{ secrets.VALINE_APP_ID }}
         app_key: ${{ secrets.VALINE_APP_KEY }}
       EOF
   ```

---

## âœ… éªŒè¯æ¸…å•

- [ ] `_config.local.yml` å·²åˆ›å»ºå¹¶åŒ…å«æ­£ç¡®çš„ app_id å’Œ app_key
- [ ] `.gitignore` å·²æ›´æ–°ï¼Œ`_config.local.yml` ä¸ä¼šè¢«æäº¤
- [ ] åœ¨ LeanCloud åŽå°è®¾ç½®äº†åŸŸåç™½åå•
- [ ] éªŒè¯åšå®¢è¯„è®ºåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æ£€æŸ¥ Git åŽ†å²ï¼Œç¡®è®¤æ•æ„Ÿä¿¡æ¯æœªæ³„éœ²

---

## ðŸ†˜ å¦‚æžœå·²ç»æ³„éœ²

å¦‚æžœ `app_id` å’Œ `app_key` å·²ç»æäº¤åˆ° Git åŽ†å²ï¼š

### 1. ç«‹å³é‡ç½®å¯†é’¥

1. è®¿é—® LeanCloud æŽ§åˆ¶å°
2. åº”ç”¨è®¾ç½® â†’ åº”ç”¨å¯†é’¥ â†’ é‡ç½® App Key
3. æ›´æ–° `_config.local.yml`

### 2. æ¸…ç† Git åŽ†å²

```bash
# ä½¿ç”¨ BFG Repo-Cleaner æˆ– git-filter-repo
# æ³¨æ„ï¼šè¿™ä¼šæ”¹å†™ Git åŽ†å²ï¼Œéœ€è¦ force push

# æ–¹æ³• 1: BFG Repo-Cleanerï¼ˆæŽ¨èï¼‰
bfg --delete-files _config.yml  # è°¨æ…Žä½¿ç”¨ï¼

# æ–¹æ³• 2: git-filter-repo
git filter-repo --path _config.yml --invert-paths

# ç„¶åŽ force push
git push --force --all
```

### 3. é€šçŸ¥ GitHub

å¦‚æžœä»“åº“æ˜¯å…¬å¼€çš„ï¼Œè€ƒè™‘ï¼š
- æš‚æ—¶å°†ä»“åº“è®¾ä¸ºç§æœ‰
- æ¸…ç†åŽ†å²åŽå†å…¬å¼€

---

## ðŸ“ž é—®é¢˜è”ç³»

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼š
- AICodeï¼ˆç¨‹è¿œï¼‰- æŠ€æœ¯æ”¯æŒ

---

**å®‰å…¨ç­‰çº§**: ðŸ”´ é«˜ä¼˜å…ˆçº§  
**æ‰§è¡ŒçŠ¶æ€**: âœ… å·²å®Œæˆé…ç½®åˆ†ç¦»  
**å¾…å®Œæˆ**: âš ï¸ LeanCloud åŸŸåç™½åå•è®¾ç½®ï¼ˆéœ€æ‰‹åŠ¨ï¼‰
